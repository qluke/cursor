---
title: Cline 记忆库
---


## Cline 记忆库完整指南

### 快速上手指南

要开始使用 Cline 记忆库：

1. **安装或打开 Cline**
2. **复制自定义指令** - 使用下方代码块
3. **粘贴到 Cline** - 作为自定义指令或添加到 .clinerules 文件
4. **初始化** - 让 Cline 执行“初始化记忆库”命令

[查看详细设置说明](/improving-your-prompting-skills/cline-memory-bank#getting-started-with-memory-bank)

---

#### Cline 记忆库自定义指令【请复制】

```md
# Cline 的记忆库
我是 Cline，一名专家级软件工程师，有一个独特特性：每次会话之间我的记忆会完全重置。这不是限制——正因如此，我会保持完美的文档记录。每次重置后，我完全依赖记忆库来理解项目并高效继续工作。每次任务开始时，我必须阅读所有记忆库文件——这不是可选项。

## 记忆库结构

记忆库由核心文件和可选上下文文件组成，均为 Markdown 格式。文件之间有清晰的层级关系：

flowchart TD
PB[projectbrief.md] --> PC[productContext.md]
PB --> SP[systemPatterns.md]
PB --> TC[techContext.md]
PC --> AC[activeContext.md]
SP --> AC
TC --> AC
AC --> P[progress.md]

### 核心文件（必需）

1. `projectbrief.md`  
   - 项目基础文档，决定其他所有文件内容
   - 项目启动时创建
   - 定义核心需求和目标
   - 项目范围的唯一真实来源

2. `productContext.md`  
   - 项目存在的原因
   - 解决的问题
   - 产品应如何工作
   - 用户体验目标

3. `activeContext.md`  
   - 当前工作重点
   - 最近变更
   - 下一步计划
   - 活跃决策与考虑
   - 重要模式与经验总结

4. `systemPatterns.md`  
   - 系统架构
   - 关键技术决策
   - 使用的设计模式
   - 组件关系
   - 关键实现路径

5. `techContext.md`  
   - 使用的技术
   - 开发环境
   - 技术约束
   - 依赖与工具使用模式

6. `progress.md`  
   - 已完成内容
   - 待开发内容
   - 当前状态
   - 已知问题
   - 项目决策的演变

### 额外上下文

如有需要，可在 memory-bank/ 目录下创建额外文件/文件夹，用于：
- 复杂功能文档
- 集成规范
- API 文档
- 测试策略
- 部署流程

## 核心工作流

### 计划模式

flowchart TD
Start[开始] --> ReadFiles[读取记忆库]
ReadFiles --> CheckFiles{文件齐全？}
CheckFiles -->|否| Plan[制定计划]
Plan --> Document[记录于对话]
CheckFiles -->|是| Verify[验证上下文]
Verify --> Strategy[制定策略]
Strategy --> Present[展示方案]

### 执行模式

flowchart TD
Start[开始] --> Context[检查记忆库]
Context --> Update[更新文档]
Update --> Execute[执行任务]
Execute --> Document[记录变更]

## 文档更新

记忆库在以下情况下需要更新：

1. 发现新项目模式
2. 实现重大变更后
3. 用户请求“update memory bank”时（必须检查所有文件）
4. 需要澄清上下文时

flowchart TD
Start[更新流程]
subgraph Process
P1[检查所有文件]
P2[记录当前状态]
P3[澄清下一步]
P4[记录经验与模式]
P1 --> P2 --> P3 --> P4
end
Start --> Process

注意：被“update memory bank”触发时，必须检查每个记忆库文件，即使部分文件无需更新。重点关注 activeContext.md 和 progress.md，这两者追踪当前状态。

请记住：每次记忆重置后，我都是全新开始。记忆库是我与过去工作的唯一联系，必须精确维护，因为我的效能完全依赖其准确性。
```

---

## 什么是 Cline 记忆库？

记忆库是一套结构化文档系统，让 Cline 能在多次会话间保持项目上下文。它让 Cline 从无状态助手变为能“记住”项目细节的持久开发伙伴。

### 主要优势

- **上下文保留**：跨会话保存项目知识
- **持续开发体验**：与 Cline 交互始终如一
- **自文档化项目**：开发过程中自动生成有价值的文档
- **适用于任何项目规模**：无论大小复杂度都适用
- **技术无关性**：适配任何技术栈或语言

---

## 记忆库工作原理

记忆库不是 Cline 独有的功能，而是一种通过结构化文档管理 AI 上下文的方法。当你让 Cline“遵循自定义指令”时，它会读取记忆库文件，重建对项目的理解。

---

## 记忆库文件说明

### 核心文件

1. **projectbrief.md**
   - 项目基础
   - 高层次概述
   - 核心需求与目标
   - 例：“开发带条码扫描的 React 库存管理应用”

2. **productContext.md**
   - 项目存在的原因
   - 解决的问题
   - 产品应如何工作
   - 例：“系统需支持多仓库和实时更新”

3. **activeContext.md**
   - 最常更新的文件
   - 当前工作重点与最近变更
   - 活跃决策与经验
   - 例：“正在开发条码扫描组件，上次完成了 API 集成”

4. **systemPatterns.md**
   - 系统架构
   - 关键技术决策
   - 设计模式
   - 组件关系
   - 例：“使用 Redux 管理状态，采用规范化存储结构”

5. **techContext.md**
   - 技术与框架
   - 开发环境
   - 技术约束
   - 依赖与工具配置
   - 例：“React 18、TypeScript、Firebase、Jest 测试”

6. **progress.md**
   - 已完成与待开发内容
   - 功能当前状态
   - 已知问题与限制
   - 项目决策演变
   - 例：“用户认证已完成，库存管理完成 80%，报表未开始”

### 额外上下文

如有需要，可创建额外文件用于：
- 复杂功能文档
- 集成规范
- API 文档
- 测试策略
- 部署流程

---

## 记忆库使用指南

### 首次设置

1. 在项目根目录创建 `memory-bank/` 文件夹
2. 准备基础项目简介（可技术或非技术）
3. 让 Cline 执行“初始化记忆库”命令

---

### 项目简介建议

- 可简单起步，细节可后续补充
- 关注你最关心的内容
- Cline 会帮助补全并提问
- 项目发展中可随时更新

---

## 与 Cline 协作

### 核心工作流

**计划模式**  
用于策略讨论和高层规划。

**执行模式**  
用于具体实现和任务执行。

### 关键命令

- **“follow your custom instructions”**：让 Cline 读取记忆库并继续上次进度（每次任务开始时使用）
- **“initialize memory bank”**：新项目初始化时使用
- **“update memory bank”**：任务中触发完整文档检查与更新
- 根据需要切换计划/执行模式

---

### 文档更新时机

- 发现新项目模式
- 实现重大变更后
- 明确请求“update memory bank”时
- 需要澄清上下文时

---

## 常见问题

### 记忆库文件存储在哪里？

记忆库文件是普通的 Markdown 文件，通常存放在项目的 `memory-bank/` 文件夹中。它们不是隐藏文件，而是项目文档的一部分。

### 应该用自定义指令还是 .clinerules 文件？

两种方式都可以，取决于你的需求：

- **自定义指令**：全局应用于所有 Cline 会话，适合多项目一致行为
- **.clinerules 文件**：项目专用，存于仓库，适合单项目定制

两者实现目标一致，选择取决于你想全局还是局部应用记忆库体系。

### 如何管理上下文窗口？

随着使用，Cline 的上下文窗口会逐渐填满（可见进度条）。当发现响应变慢或对早期内容引用不准确时，请：

1. 让 Cline 执行 **“update memory bank”** 记录当前状态
2. 开启新会话/任务
3. 在新会话中让 Cline **“follow your custom instructions”**

这样可确保重要上下文被保存到记忆库文件，便于在新会话中无缝继续。

---

### 记忆库多久更新一次？

每次重大里程碑或方向变更后更新。活跃开发时，每隔几次会话更新一次较好。需要确保上下文完整时可用 **“update memory bank”** 命令。Cline 也会自动更新记忆库。

### 记忆库能否用于其他 AI 工具？

可以！记忆库是一种文档方法，适用于任何能读取文档的 AI 助手。具体命令可能不同，但结构化上下文管理方法通用。

### 记忆库如何应对上下文窗口限制？

记忆库通过结构化存储关键信息，便于随时加载，避免上下文膨胀，同时确保关键信息可用。

### 记忆库能否用于非编程项目？

当然！任何需要结构化文档的项目都适用记忆库方法，比如写书、活动策划等。文件结构可根据实际需求调整。

### 记忆库与 README 有何不同？

虽然理念类似，但记忆库更结构化、全面，专为 AI 会话上下文管理设计，远超单一 README 的覆盖范围。

---

## 最佳实践

### 入门建议

- 以基础项目简介为起点，结构可逐步完善
- 让 Cline 协助创建初始结构
- 根据实际工作流调整文件

### 持续工作

- 随工作自然形成文档模式
- 不必强制频繁更新文档，顺其自然
- 相信流程，价值会逐步积累
- 每次会话开始注意上下文确认

### 文档流程

- **projectbrief.md** 是基础
- **activeContext.md** 变更最频繁
- **progress.md** 记录里程碑
- 所有文件共同维护项目智能

---

## 详细设置说明

### 使用自定义指令（全局）

1. 打开 VSCode
2. 点击 Cline 扩展设置 ⚙️
3. 找到“Custom Instructions”
4. 复制并粘贴本指南顶部的记忆库指令

### 使用 .clinerules（项目专用）

1. 在项目根目录创建 `.clinerules` 文件
2. 复制并粘贴本指南顶部的记忆库指令
3. 保存文件
4. Cline 会自动应用这些规则

---

## 请记住

记忆库是 Cline 唯一的历史联系。其效能完全依赖于文档的清晰、准确和每次交互时的上下文确认。

_更多信息请参考我们的_ [_博客_](https://cline.bot/blog/memory-bank-how-to-make-cline-an-ai-agent-that-never-forgets) _关于 Cline 记忆库_

---

## 贡献者

本指南由 Cline 及 Cline Discord 社区维护：

- nickbaumann98
- Krylo
- snipermunyshotz

---

_记忆库方法论是一种开放的 AI 上下文管理方式，可适配不同工具和工作流。_

 
